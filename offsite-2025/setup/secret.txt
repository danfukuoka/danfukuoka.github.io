{
  "_id": { "$oid": "67fc1af2068225d251407744" },
  "secret": "c0ngr@tulati0ns-k8s"
}



5. Access the Kubernetes Cluster
6. Create your Kubernetes namespace
7. Create your service account in your namespace
8. Run the application in your namespace with your service account, retrieve the token and copy down the sub value.
9. Create a Database Access with that sub value.
10. Re-run the application and successfully connect to the database.


curl -u "vqucwnvr:b9bb5de8-c8da-4ddb-a143-538c6b441e47" \
  --digest \
  --header "Content-Type: application/json" \
  --header "Accept: application/vnd.atlas.2025-03-12+json" \
  --request POST \
  --data '  {
  "databaseName": "$external",
  "groupId": "32b6e34b3d91647abb20e7b8",
  "oidcAuthType": "USER",
  "roles": [
    {
      "databaseName": "admin",
      "roleName": "atlasAdmin"
    }
  ],
  "username": "67dd7972a00238743e30e4cf/system:serviceaccount:ns-danilo:sa-danilo"
}' \
"https://cloud.mongodb.com/api/atlas/v2/groups/650bc504f2b72047dc277af4/databaseUsers"


curl --user "snmejext:00000000-0000-0000-0000-00002879c465" \
--digest \
--header "Accept: application/vnd.atlas.2024-08-05+json" \
-X GET "https://cloud.mongodb.com/api/atlas/v2/groups/67123d85590a1640e6eb00b6/clusters"